{% from "flights/components/price_part.html" import price_part with context %}

{% macro render_flight_card(flight, search_time) %}
<div class="card my-4 shadow-sm overflow-hidden">
    <div class="row g-0">
        <!--  -->
        <!--  -->
        <!--  -->
        <div class="col-md-4 text-center p-2">
            <div
            class="w-100 h-100 d-flex align-items-center justify-content-between"
            >
            <div class="d-flex flex-column align-items-center">
                <p class="mb-2">{{flight.depart_time.strftime("%H:%M")}}</p>
                <p class="mb-2" title="{{flight.route.depart_airport}}">
                {{flight.route.depart_airport.code}}
                </p>
                <p>{{flight.depart_time.strftime("%d/%m/%Y")}}</p>
            </div>
            <div class="d-flex align-items-center flex-grow-1">
                <div class="dotted-underline"></div>
                <!--  -->
                <!--  -->
                {% if not flight.intermediate_airports %}
                <small>nonstop</small>
                {% elif flight.intermediate_airports |length == 1 %}
                <small title="{{flight.intermediate_airports[0].airport}}"
                >{{flight.intermediate_airports[0].airport.code}}</small
                >
                {% else %}
                <small>{{flight.intermediate_airports |length}} stops</small>
                {% endif %}
                <!--  -->
                <!--  -->
                <div class="dotted-underline"></div>
            </div>

            <div class="d-flex flex-column align-items-center">
                <p class="mb-2">{{flight.arrive_time.strftime('%H:%M')}}</p>
                <p class="mb-2" title="{{flight.route.arrive_airport}}">
                {{flight.route.arrive_airport.code}}
                </p>
                <p>{{flight.arrive_time.strftime("%d/%m/%Y")}}</p>
            </div>
            </div>
        </div>
        <!--  -->
        <!--  -->
        <!--  -->
        <div class="col-md-4 border-start border-end p-2">
            <div class="mx-auto" style="width: fit-content">
            <div class="d-flex align-items-center">
                <i class="fa-solid fa-clock me-1"></i>
                <span>Flight duration: {{flight.arrive_time - flight.depart_time}}</span>
            </div>
            <div >
                <div>Flight ID: {{flight.id}}</div>
                <div>Airline: {{flight.aircraft.airline.name}}</div>
                <div>Aircraft: {{flight.aircraft.name}}</div>
                <a href="{{url_for('flights.showFlight', id=flight.id)}}">Flight details</a>
            </div>
            </div>
        </div>
        <!--  -->
        <!--  -->
        <!--  -->
        <div class="col-md-4 d-flex flex-wrap">
            {{ price_part(flight, search_time) }}
        </div>
    </div>
</div>
{% endmacro %}
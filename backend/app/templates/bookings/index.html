{% from "bookings/components/reservation_form.html" import render_reservation_form with context%}

{% extends "layouts/base.html" %}
{% block content %}
<div class="container mt-5">
    {% set remain_time_to_depart = (flight.depart_time - search_time).total_seconds()/60 %}
    {% set role = current_user.role.value if current_user.role %}
    {% if remain_time_to_depart < staff_min_booking_time %}
        <div class="d-flex flex-column justify-content-center w-100 min-vh-100">
            <div class="text-center text-muted h3">
                <i class="fa-regular fa-circle-xmark"></i>
                <p class="">This flight doesn't allow to book anymore!</p>
            </div>
        </div>
    {% elif (not role or role == 4) and remain_time_to_depart < customer_min_booking_time %} 
    <div class="d-flex flex-column justify-content-center w-100 min-vh-100">
        <div class="text-center text-muted h3">
                <i class="fa-solid fa-person-running"></i>
                <p class="">Please go to the closest store to book!</p>
            </div>
        </div>
    {% else %}
        <h2>Booking{{ flight.route_code }}</h2>
        <p>Seat class: {{ seat_class.name }}</p>

        <!-- Các nút ghế -->
        <div class="d-flex align-items-center justify-content-around">
            <div class="d-flex align-items-center gap-1">
                <button class="btn btn-secondary">S000</button><span>Not available</span>
            </div>
            <div class="d-flex align-items-center gap-1">
                <button class="btn btn-success">S111</button><span>Chosen seat</span>
            </div>
            <div class="d-flex align-items-center gap-1">
                <button class="btn btn-outline-success">S222</button><span>Available</span>
            </div>
        </div>
        {{ render_reservation_form (flight, seat_class) }}
    {% endif %}
</div>

{% endblock %}
